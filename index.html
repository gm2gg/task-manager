<!DOCTYPE html>
<html>
<head>
    <title>Задачник</title>
</head>
<body>
    <h1>Мой задачник</h1>

    <input type="text" id="taskInput" placeholder="Введите задачу">
    <button onclick="addTask()">Добавить задачу</button>

    <div id="taskList"></div>

    <script>
    // ========== твой код (можно редактировать) ==========
    
    function addTask() {
        const taskText = document.getElementById('taskInput').value;
        if (taskText.trim() === '') return;
    
        // твой код для отображения на странице
        const taskList = document.getElementById('taskList');
        const newTask = document.createElement('div');
        newTask.textContent = taskText;
        taskList.appendChild(newTask);

        // очищаем поле ввода
        document.getElementById('taskInput').value = '';
        
        // вызываем функцию для отправки на сервер
        saveTaskToServer(taskText);
    }
    
    // здесь можно добавлять свой код для сайта
    // новые функции, обработчики, логику отображения
    
    // ========== связь с сервером (не трогать) ==========
    
    function loadTasks() {
        fetch('http://localhost:5000/get_tasks?user_id=123')
            .then(response => response.json())
            .then(tasks => {
                const taskList = document.getElementById('taskList');
                taskList.innerHTML = '';
                
                tasks.forEach(task => {
                    const taskElement = document.createElement('div');
                    taskElement.textContent = task[2];
                    taskList.appendChild(taskElement);
                });
            })
            .catch(error => {
                console.error('Ошибка загрузки задач:', error);
            });
    }

    function saveTaskToServer(taskText) {
        fetch('http://localhost:5000/save_task', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                user_id: 123,
                title: taskText
            })
        })
        .then(response => response.json())
        .then(data => {
            console.log('Задача сохранена:', data);
        })
        .catch(error => {
            console.error('Ошибка:', error);
        });
    }

    document.addEventListener('DOMContentLoaded', loadTasks);
    
    </script>
</body>
</html>
